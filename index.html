<!doctype html>
<head>
  <meta charset="utf-8">
  <title>Hits view</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/92/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.4.0/papaparse.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>  
  <script src="third_party/OrbitControls.js"></script>
  <script src="primitives.js"></script>
  <script src="app.js"></script>
  <script src="vm.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">  
</head>
<body>
  <div id="container"></div>
  <div id='controls' class="hover-panel">    
    <input type='checkbox' data-bind='checked: Autorotate'>Autorotate</div>
  </div>
  <div id='status' class="hover-panel">
    <h3>event000001000</h3>
    <p>Overall hits: <span data-bind="text: HitsCount"></span></p>    
  </div>
  <script>
      var vm = new ViewModel();            

      init();
      ko.applyBindings(vm);
      run();

      vm.Autorotate(true);

      Papa.parse("event000001000-hits.csv", {
	    download: true,
	    complete: function(results) {
          var N = results.data.length - 1;          
          var points = [];
          for(var i=0;i<N;i++) {
              var row = results.data[i+1];   
              points.push(new THREE.Vector3(parseFloat(row[1]),parseFloat(row[2]),parseFloat(row[3])));                       	            
            }	
          vm.Hits(points);          
	        }
      });
  </script>
</body>
</html>